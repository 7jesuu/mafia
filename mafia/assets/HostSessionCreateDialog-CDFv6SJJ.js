import{L as Z,a as d,O as x,P as O,Q as a,R as e,_ as v,V as c,S as t,Y as Pe,an as ye,ao as ge,r as R,w as be,am as Ge,al as j,T as m,t as Re,$ as M,a1 as Q,aZ as Me,a_ as he,X as E,W as z,ab as De,a$ as ke,aX as Se,a0 as Ve,aY as Ae}from"./index-mZFDmhnv.js";import{a as Qe,Q as B}from"./QTabPanels-DtneUSqx.js";import{Q as xe}from"./QBtnGroup-crTlgAuY.js";import{a as we,Q as X}from"./QTabs-yUslrTAi.js";import{Q as Y}from"./QSelect-BgVmAFQS.js";import{P as l,U as ee,v as p,t as h,w as s,C as _,a7 as P,ab as Be,s as Ie,ac as qe,ad as Le,ae as Je,_ as Te}from"./_plugin-vue_export-helper-VXAAOWQH.js";import{u as ae}from"./vue-i18n-BYz-iA8F.js";import{u as K}from"./use-dialog-plugin-component-CnvAtoGJ.js";import{h as W,M as Ue}from"./Player.Utilities-BIboltz3.js";import{P as ze}from"./PlayerCountInput--EOvmu8X.js";import{_ as Oe}from"./ParticipantList.vue_vue_type_script_setup_true_lang-B1jpeg3E.js";import{Q as He}from"./QList-BC2pjQWj.js";import{P as k}from"./PlayerRoleIcon-ApZzWwII.js";import"./format-BvkBI9bc.js";import"./QSlider-DtpxoMao.js";import"./TouchPan-BuTX8gVK.js";const Ne=Z({__name:"HostParticipantsSummaryList",props:{participants:{type:Array,required:!0}},setup(H){const g=H,{t:y}=ae(),I=d(()=>g.participants.filter(i=>i.Role==l.Civilian).length),o=d(()=>g.participants.filter(i=>i.Role==l.Detective).length),q=d(()=>g.participants.filter(i=>i.Role==l.Doctor).length),L=d(()=>g.participants.filter(i=>i.Role==l.Mafia).length),J=d(()=>g.participants.filter(i=>i.Role==l.Murderer).length),b=d(()=>g.participants.filter(i=>i.Role==l.Psycho).length),{PlainColor:C}=ee();return(i,G)=>(x(),O(He,ye(ge(g)),{default:a(()=>[e(p,{header:""},{default:a(()=>[v(c(t(y)("Game.PlayerCount")),1)]),_:1}),e(h,null,{default:a(()=>[e(s,{side:""},{default:a(()=>[e(Pe,{name:"sym_s_groups",color:t(C),size:"md"},null,8,["color"])]),_:1}),e(s,null,{default:a(()=>[e(p,null,{default:a(()=>[v(c(t(y)("Game.TotalPlayerCount")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(p,{caption:""},{default:a(()=>[v(c(g.participants.length),1)]),_:1})]),_:1})]),_:1}),e(p,{header:""},{default:a(()=>[v(c(t(y)("Game.PlayerRoles")),1)]),_:1}),e(h,null,{default:a(()=>[e(s,{side:""},{default:a(()=>[e(k,{role:t(l).Civilian,color:t(C),size:"md"},null,8,["role","color"])]),_:1}),e(s,null,{default:a(()=>[e(p,null,{default:a(()=>[v(c(t(y)("Game.Civilians")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(p,{caption:""},{default:a(()=>[v(c(I.value),1)]),_:1})]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(s,{side:""},{default:a(()=>[e(k,{role:t(l).Detective,color:t(C),size:"md"},null,8,["role","color"])]),_:1}),e(s,null,{default:a(()=>[e(p,null,{default:a(()=>[v(c(t(y)("Game.Detectives")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(p,{caption:""},{default:a(()=>[v(c(o.value),1)]),_:1})]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(s,{side:""},{default:a(()=>[e(k,{role:t(l).Doctor,color:t(C),size:"md"},null,8,["role","color"])]),_:1}),e(s,null,{default:a(()=>[e(p,null,{default:a(()=>[v(c(t(y)("Game.Doctors")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(p,{caption:""},{default:a(()=>[v(c(q.value),1)]),_:1})]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(s,{side:""},{default:a(()=>[e(k,{role:t(l).Mafia,color:t(C),size:"md"},null,8,["role","color"])]),_:1}),e(s,null,{default:a(()=>[e(p,null,{default:a(()=>[v(c(t(y)("Game.Mafia")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(p,{caption:""},{default:a(()=>[v(c(L.value),1)]),_:1})]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(s,{side:""},{default:a(()=>[e(k,{role:t(l).Murderer,color:t(C),size:"md"},null,8,["role","color"])]),_:1}),e(s,null,{default:a(()=>[e(p,null,{default:a(()=>[v(c(t(y)("Game.Murderers")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(p,{caption:""},{default:a(()=>[v(c(J.value),1)]),_:1})]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(s,{side:""},{default:a(()=>[e(k,{role:t(l).Psycho,color:t(C),size:"md"},null,8,["role","color"])]),_:1}),e(s,null,{default:a(()=>[e(p,null,{default:a(()=>[v(c(t(y)("Game.Psychos")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(p,{caption:""},{default:a(()=>[v(c(b.value),1)]),_:1})]),_:1})]),_:1})]),_:1},16))}}),$e={class:"col"},Fe={class:"text-subtitle1"},je={class:"col-auto"},Ee={class:"column fit no-wrap q-col-gutter-y-md"},Xe={class:"col-auto text-caption"},Ye={class:"column fit no-wrap q-col-gutter-y-md"},Ke={class:"col-auto text-caption"},We={class:"col-auto"},Ze={class:"col-auto"},ea={class:"col-auto"},aa={key:0,class:"col-auto"},la={class:"col-auto row items-center q-col-gutter-x-sm q-pa-sm"},ta={class:"col"},oa={class:"col-auto"},na={class:"col-auto"},ua={class:"col fit"},ia={class:"col-auto"},sa={class:"col-auto q-pa-sm"},ra=Z({__name:"HostSessionCreateDialog",emits:[...K.emits],setup(H){const{dialogRef:g,onDialogOK:y,onDialogHide:I}=K(),{t:o}=ae({}),q=[{value:l.Civilian,label:o("Game.Civilian")},{value:l.Mafia,label:o("Game.Mafia")}],L=[{value:l.Doctor,label:o("Game.Doctor")},{value:l.Detective,label:o("Game.Detective")},{value:l.Murderer,label:o("Game.Murderer")},{value:l.Psycho,label:o("Game.Psycho")},{value:l.Admirer,label:o("Game.Admirer")},{value:l.Avenger,label:o("Game.Avenger")},{value:l.Bodyguard,label:o("Game.Bodyguard")},{value:l.Journalist,label:o("Game.Journalist")},{value:l.Judge,label:o("Game.Judge")},{value:l.Luckling,label:o("Game.Luckling")}],J=[{value:l.Doctor,label:o("Game.Doctor")},{value:l.Detective,label:o("Game.Detective")},{value:l.Murderer,label:o("Game.Murderer")},{value:l.Psycho,label:o("Game.Psycho")},{value:l.Admirer,label:o("Game.Admirer")},{value:l.Avenger,label:o("Game.Avenger")},{value:l.Bodyguard,label:o("Game.Bodyguard")},{value:l.Journalist,label:o("Game.Journalist")},{value:l.Judge,label:o("Game.Judge")},{value:l.Luckling,label:o("Game.Luckling")}],b=R(_.Game.PlayerDefaultCount),C=R(!0),i=R(W),G=R(P(_.Game.PlayerMaximumCount,n=>Be(n+1))),f=R("count"),w=R("manual"),S=R(l.Civilian),V=R([]),N=d(()=>q.concat(J.filter(n=>i.value.includes(n.value)))),D=d(()=>G.value.slice(0,Math.min(Math.max(b.value,_.Game.PlayerMinimumCount),_.Game.PlayerMaximumCount))),le=d(()=>G.value.filter(n=>n.Role==l.Civilian)),te=d(()=>G.value.filter(n=>n.Role==l.Detective)),oe=d(()=>G.value.filter(n=>n.Role==l.Doctor)),ne=d(()=>G.value.filter(n=>n.Role==l.Mafia)),ue=d(()=>G.value.filter(n=>n.Role==l.Murderer)),$=d(()=>f.value!="count"),ie=d(()=>{if(f.value=="summary")return!1;switch(f.value){case"count":return b.value>=_.Game.PlayerMinimumCount&&b.value<=_.Game.PlayerMaximumCount;case"assignRoles":return le.value.length>=_.Game.CivilianPlayerMinimumCount&&te.value.length>=_.Game.DetectivePlayerMinimumCount&&oe.value.length>=_.Game.DoctorPlayerMinimumCount&&ne.value.length>=_.Game.MafiaPlayerMinimumCount&&ue.value.length>=_.Game.MurdererPlayerMinimumCount}return!0}),T=d(()=>f.value=="roles"&&C.value||f.value=="summary"),U=d(()=>w.value=="group"),se=d(()=>C.value||D.value.filter(n=>n.Role==l.Civilian).length>=_.Game.CivilianPlayerMinimumCount&&D.value.filter(n=>n.Role==l.Mafia).length>=_.Game.MafiaPlayerMinimumCount),{ButtonStyle:re,ComponentColor:F}=ee();be(i,n=>{n.includes(S.value)||(S.value=l.Civilian);for(const u of G.value)n.includes(u.Role)||(u.Role=l.Civilian)});function ce(){switch(f.value){case"roles":f.value="count";break;case"assignRoles":f.value="roles";break;case"summary":f.value="assignRoles";break}}function de(){switch(f.value){case"count":f.value="roles";break;case"roles":f.value="assignRoles";break;case"assignRoles":f.value="summary";break}}function me(){i.value=W}function ve(){i.value=Ue}function pe(){for(const n of V.value)n.Role=S.value;V.value=[]}async function fe(){const n=await qe(b.value,i.value);if(n===void 0)return;const u=Le([...P(n.MafiaPlayerCount,()=>l.Mafia),...P(n.MurdererPlayerCount,()=>l.Murderer),...P(n.PsychoPlayerCount,()=>l.Psycho),...P(n.AdmirerPlayerCount,()=>l.Admirer),...P(n.AvengerPlayerCount,()=>l.Avenger),...P(n.BodyguardPlayerCount,()=>l.Bodyguard),...P(n.DetectivePlayerCount,()=>l.Detective),...P(n.DoctorPlayerCount,()=>l.Doctor),...P(n.JournalistPlayerCount,()=>l.Journalist),...P(n.JudgePlayerCount,()=>l.Judge),...P(n.LucklingPlayerCount,()=>l.Luckling)],l.Civilian,b.value),r=Je(u);let A=0;for(const Ce of D.value)r[A]!==void 0&&(Ce.Role=r[A]),A++}function _e(){y({Participants:D.value,HasInitialRolesSet:!C.value,AdditionalRoles:i.value})}return(n,u)=>(x(),O(Ae,{ref_key:"dialogRef",ref:g,onHide:u[13]||(u[13]=()=>t(I)()),persistent:""},{default:a(()=>[e(Ge,{class:"q-dialog-plugin dialog-card column no-wrap","non-square":""},{default:a(()=>[e(j,{class:"col-auto row items-center justify-between"},{default:a(()=>[m("div",$e,[m("div",Fe,c(t(o)("Game.GameSetup")),1)]),m("div",je,[Re(e(M,{icon:"s_close",round:"",flat:""},null,512),[[Ie]])])]),_:1}),e(Q),e(j,{class:"col grid scroll fit q-pa-none"},{default:a(()=>[e(Qe,{modelValue:f.value,"onUpdate:modelValue":u[10]||(u[10]=r=>f.value=r),class:"fit","keep-alive":"",animated:""},{default:a(()=>[e(B,{class:"fit q-pa-md",name:"count"},{default:a(()=>[m("div",Ee,[m("div",Xe,c(t(o)("Game.NumberOfPlayers")),1),e(ze,{class:"col-auto",modelValue:b.value,"onUpdate:modelValue":u[0]||(u[0]=r=>b.value=r),minimum:t(_).Game.PlayerMinimumCount,maximum:t(_).Game.PlayerMaximumCount},null,8,["modelValue","minimum","maximum"])])]),_:1}),e(B,{class:"fit q-pa-md",name:"roles"},{default:a(()=>[m("div",Ye,[m("div",Ke,c(t(o)("Game.AdditionalRoles")),1),m("div",We,[e(xe,{spread:"",outline:""},{default:a(()=>[e(M,{onClick:u[1]||(u[1]=()=>me()),label:t(o)("Game.Classic"),outline:"","no-caps":""},null,8,["label"]),e(M,{onClick:u[2]||(u[2]=()=>ve()),label:t(o)("Game.Mafia20"),outline:"","no-caps":""},null,8,["label"])]),_:1})]),m("div",Ze,[e(Me,{modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=r=>i.value=r),options:L,type:"checkbox",color:t(F)},null,8,["modelValue","color"])]),m("div",ea,[e(he,{modelValue:C.value,"onUpdate:modelValue":u[4]||(u[4]=r=>C.value=r),label:t(o)("Game.SetRolesLater"),color:t(F)},null,8,["modelValue","label","color"])])])]),_:1}),e(B,{class:"column fit no-wrap q-pa-none",name:"assignRoles"},{default:a(()=>[e(we,{class:"col-auto text-primary q-pa-sm",modelValue:w.value,"onUpdate:modelValue":u[5]||(u[5]=r=>w.value=r),align:"justify","no-caps":""},{default:a(()=>[e(X,{name:"manual",label:t(o)("Game.RoleManual")},null,8,["label"]),e(X,{name:"group",label:t(o)("Game.RoleGroup")},null,8,["label"])]),_:1},8,["modelValue"]),U.value?z("",!0):(x(),E("div",aa,[e(Q)])),U.value?(x(),E(De,{key:1},[m("div",la,[m("div",ta,[e(Y,{modelValue:S.value,"onUpdate:modelValue":u[6]||(u[6]=r=>S.value=r),options:N.value,behavior:"menu","map-options":"","emit-value":"","hide-bottom-space":"",outlined:"",dense:""},null,8,["modelValue","options"])]),m("div",oa,[e(M,{label:t(o)("Game.Assign"),disable:V.value.length<1,onClick:u[7]||(u[7]=()=>pe()),color:"primary",outline:"","no-caps":""},null,8,["label","disable"])])]),m("div",na,[e(Q)])],64)):z("",!0),m("div",ua,[e(Oe,{class:"fit scroll",modelValue:V.value,"onUpdate:modelValue":u[8]||(u[8]=r=>V.value=r),items:D.value,selection:w.value=="group"},ke({_:2},[U.value?void 0:{name:"actions",fn:a(({participant:r})=>[e(Y,{modelValue:r.Role,"onUpdate:modelValue":A=>r.Role=A,options:N.value,behavior:"menu","map-options":"","emit-value":"","hide-bottom-space":"",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","options"])]),key:"0"}]),1032,["modelValue","items","selection"])]),m("div",ia,[e(Q)]),m("div",sa,[e(M,{class:"full-width",label:t(o)("Game.AssignRandomly"),onClick:u[9]||(u[9]=()=>fe()),color:"primary",outline:"","no-caps":""},null,8,["label"])])]),_:1}),e(B,{class:"fit q-pa-none",name:"summary"},{default:a(()=>[e(Ne,{participants:D.value},null,8,["participants"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(Q),e(Se,{class:"col-auto",align:"right"},{default:a(()=>[$.value?(x(),O(M,{key:0,onClick:u[11]||(u[11]=()=>ce()),label:t(o)("General.Back"),disable:!$.value,color:"primary",flat:"","no-caps":""},null,8,["label","disable"])):z("",!0),e(M,Ve({onClick:u[12]||(u[12]=()=>T.value?_e():de()),label:T.value?t(o)("General.Create"):t(o)("General.Next"),disable:T.value?!se.value:!ie.value,color:"primary"},t(re),{"no-caps":""}),null,16,["label","disable"])]),_:1})]),_:1})]),_:1},512))}}),Da=Te(ra,[["__scopeId","data-v-81faee5e"]]);export{Da as default};
