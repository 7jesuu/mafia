import{L as Q,r as _,a as x,q as H,o as F,O as t,X as m,T as i,R as n,S as r,$ as v,W as f,P as S,b4 as W,V as h,ab as X,Q as y,am as Y,al as P,t as J,a1 as K,aY as Z}from"./index-mZFDmhnv.js";import{C as s,U as ee,aa as b,_ as oe,u as se,$ as ae,s as le}from"./_plugin-vue_export-helper-VXAAOWQH.js";import{u as te}from"./vue-i18n-BYz-iA8F.js";import{u as O}from"./use-dialog-plugin-component-CnvAtoGJ.js";import{Q as ne}from"./QSlider-DtpxoMao.js";import"./TouchPan-BuTX8gVK.js";import"./format-BvkBI9bc.js";const ue={class:"column q-col-gutter-y-sm"},ie={class:"col-auto row justify-center items-center q-col-gutter-x-sm"},re={key:0,class:"col"},de={class:"col"},ce={key:1,class:"counter"},me={key:1,class:"col"},fe={key:0,class:"col-auto"},ve={class:"col-auto row items-center q-col-gutter-x-sm"},pe={class:"col"},_e={class:"col"},ye=Q({__name:"TimerComponent",props:{seconds:{type:Number,required:!1,default:s.Game.TimerDefaultSecondsValue},autoStart:{type:Boolean,required:!1,default:!1},controls:{type:Boolean,required:!1,default:!1},sound:{type:Boolean,required:!1,default:!1}},emits:["start","pause","timeOver"],setup(T,{emit:d}){const a=T,p=d,g=new Audio(s.Sounds.TimerLowSound),C=new Audio(s.Sounds.TimerEndSound),l=_(a.seconds),u=_(a.seconds),e=_(!1),c=_(!1);let w;const E=x(()=>"#".repeat(String(Math.trunc(s.Game.TimerMaximumSecondsValue)).length)),G=x(()=>l.value<s.Game.TimerMaximumSecondsValue),M=x(()=>l.value>s.Game.TimerMinimumSecondsValue),{PlainColor:q}=ee();function $(){u.value=b(u.value,s.Game.TimerMinimumSecondsValue,s.Game.TimerMaximumSecondsValue)}function N(){a.sound&&g.play()}function z(){a.sound&&C.play()}function A(){G.value&&u.value++}function L(){M.value&&u.value--}function R(){if(l.value-1==s.Game.TimerLowThreshold)N();else if(l.value<=1){z(),k(),p("timeOver");return}c.value||l.value--}function I(){l.value=b(u.value,s.Game.TimerMinimumSecondsValue,s.Game.TimerMaximumSecondsValue),e.value=!0,w=setInterval(()=>R(),1e3),p("start")}function U(){c.value=!0}function j(){c.value=!1}function k(){l.value=0,e.value=!1,c.value=!1,clearInterval(w)}function B(D){u.value=b(Number(D),s.Game.TimerMinimumSecondsValue,s.Game.TimerMaximumSecondsValue)}return H(()=>{a.autoStart&&I()}),F(()=>{k()}),(D,o)=>(t(),m("div",ue,[i("div",ie,[a.controls&&!e.value?(t(),m("div",re,[n(v,{onClick:o[0]||(o[0]=()=>L()),disable:e.value||!M.value,icon:"sym_s_remove",size:"lg",color:r(q),flat:""},null,8,["disable","color"])])):f("",!0),i("div",de,[a.controls&&!e.value?(t(),S(W,{key:0,class:"seconds-input","model-value":u.value,type:"text",mask:E.value,"onUpdate:modelValue":o[1]||(o[1]=V=>B(V)),onBlur:o[2]||(o[2]=()=>$()),"input-class":"text-center",maxlength:"2","unmasked-value":"",outlined:""},null,8,["model-value","mask"])):f("",!0),!a.controls||e.value?(t(),m("span",ce,h(l.value),1)):f("",!0)]),a.controls&&!e.value?(t(),m("div",me,[n(v,{onClick:o[3]||(o[3]=()=>A()),disable:e.value||!G.value,icon:"sym_s_add",size:"lg",color:r(q),flat:""},null,8,["disable","color"])])):f("",!0)]),a.controls?(t(),m(X,{key:0},[e.value?f("",!0):(t(),m("div",fe,[n(ne,{"model-value":u.value,min:r(s).Game.TimerMinimumSecondsValue,max:r(s).Game.TimerMaximumSecondsValue,disable:e.value,"onUpdate:modelValue":o[4]||(o[4]=V=>B(V))},null,8,["model-value","min","max","disable"])])),i("div",ve,[i("div",pe,[n(v,{class:"full-width filled-icon",onClick:o[5]||(o[5]=()=>k()),disable:!e.value,size:"lg",icon:"sym_s_stop",color:"negative",outline:""},null,8,["disable"])]),i("div",_e,[e.value&&!c.value?(t(),S(v,{key:0,class:"full-width filled-icon",onClick:o[6]||(o[6]=()=>U()),size:"lg",icon:"sym_s_pause",color:"primary",outline:""})):(t(),S(v,{key:1,class:"full-width filled-icon",onClick:o[7]||(o[7]=()=>c.value?j():I()),size:"lg",icon:"sym_s_play_arrow",color:"primary",unelevated:""}))])])],64)):f("",!0)]))}}),Se=oe(ye,[["__scopeId","data-v-976facba"]]),Te={class:"col"},ge={class:"text-subtitle1"},Ce={class:"col-auto"},qe=Q({__name:"TimerDialog",props:{seconds:{type:Number,required:!1,default:s.Game.TimerDefaultSecondsValue},controls:{type:Boolean,required:!1,default:!1},autoStart:{type:Boolean,required:!1,default:!1},autoClose:{type:Boolean,required:!1,default:!1}},emits:[...O.emits],setup(T){const d=T,{dialogRef:a,onDialogHide:p}=O(),{t:g}=te({}),C=se(ae);function l(){d.autoClose&&p()}return(u,e)=>(t(),S(Z,{ref_key:"dialogRef",ref:a,onHide:e[1]||(e[1]=()=>r(p)()),persistent:""},{default:y(()=>[n(Y,{class:"q-dialog-plugin dialog-card column no-wrap","non-square":""},{default:y(()=>[n(P,{class:"col-auto row items-center justify-between"},{default:y(()=>[i("div",Te,[i("div",ge,h(r(g)("Game.Timer")),1)]),i("div",Ce,[J(n(v,{icon:"s_close",round:"",flat:""},null,512),[[le]])])]),_:1}),n(K),n(P,{class:"col scroll text-center"},{default:y(()=>[n(Se,{seconds:d.seconds,controls:d.controls,"auto-start":d.autoStart,sound:r(C),onTimeOver:e[0]||(e[0]=()=>l())},null,8,["seconds","controls","auto-start","sound"])]),_:1})]),_:1})]),_:1},512))}});export{qe as default};
