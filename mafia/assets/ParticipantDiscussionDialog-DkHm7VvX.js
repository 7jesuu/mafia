import{L as x,r as f,a as _,q as b,O as d,P as q,Q as o,R as a,am as A,al as v,T as s,V as g,S as l,X as D,W as P,t as Q,$ as B,a1 as V,Y as G,aY as O}from"./index-mZFDmhnv.js";import{s as T,J as $,r as E,C as N,_ as R}from"./_plugin-vue_export-helper-VXAAOWQH.js";import{u as H}from"./vue-i18n-BYz-iA8F.js";import{u as y}from"./use-dialog-plugin-component-CnvAtoGJ.js";import{_ as L}from"./TooltipButton.vue_vue_type_script_setup_true_lang-BrWzxVan.js";import{_ as Y}from"./ParticipantList.vue_vue_type_script_setup_true_lang-B1jpeg3E.js";import"./QList-BC2pjQWj.js";import"./Player.Utilities-BIboltz3.js";import"./PlayerRoleIcon-ApZzWwII.js";const j={class:"col"},z={class:"text-subtitle1"},J={class:"col-auto row items-center q-col-gutter-x-sm"},K={key:0,class:"col-auto"},M={class:"col-auto"},W={key:0,class:"row items-center"},X={class:"col-auto"},F={class:"col-auto text-caption text-positive"},U=x({__name:"ParticipantDiscussionDialog",props:{selectedParticipants:{type:Array,required:!0},remainingParticipants:{type:Array,required:!1,default:()=>[]}},emits:[...y.emits],setup(h){const m=h,{dialogRef:w,onDialogOK:Z,onDialogHide:S}=y(),{t:r}=H({}),i=f([]),n=f([]),C=_(()=>i.value.slice().sort((e,t)=>n.value.indexOf(e)-n.value.indexOf(t))),c=_(()=>{const e=i.value.map(t=>t.Id);return m.remainingParticipants.filter(t=>!e.includes(t.Id))});function p(e){return n.value.includes(e)}async function I(){const e=await $(c.value);e!==void 0&&i.value.push(...c.value.filter(t=>t.Id==e))}async function k(e){p(e)||(await E(N.Game.TimerDefaultSecondsValue,{IsAutoStartEnabled:!0,IsAutoCloseEnabled:!0}),n.value.push(e))}return b(()=>{i.value=m.selectedParticipants.map(e=>({...e}))}),(e,t)=>(d(),q(O,{ref_key:"dialogRef",ref:w,onHide:t[2]||(t[2]=()=>l(S)()),persistent:""},{default:o(()=>[a(A,{class:"q-dialog-plugin dialog-card column no-wrap","non-square":""},{default:o(()=>[a(v,{class:"col-auto row items-center justify-between"},{default:o(()=>[s("div",j,[s("div",z,g(l(r)("Game.Discussion")),1)]),s("div",J,[c.value.length>0?(d(),D("div",K,[a(L,{label:l(r)("Game.AddPlayer"),onClick:t[0]||(t[0]=()=>I()),icon:"sym_s_add",round:"",flat:"","no-caps":""},null,8,["label"])])):P("",!0),s("div",M,[Q(a(B,{icon:"s_close",round:"",flat:""},null,512),[[T]])])])]),_:1}),a(V),a(v,{class:"col grid fit q-pa-none"},{default:o(()=>[a(Y,{class:"fit scroll",items:C.value,onItemClick:t[1]||(t[1]=u=>k(u)),clickable:""},{actions:o(({participant:u})=>[p(u)?(d(),D("div",W,[s("div",X,[a(G,{name:"sym_s_check",size:"sm",color:"positive"})]),s("div",F,g(l(r)("Game.DiscussionDoneLabel")),1)])):P("",!0)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1},512))}}),ce=R(U,[["__scopeId","data-v-1f7723e6"]]);export{ce as default};
