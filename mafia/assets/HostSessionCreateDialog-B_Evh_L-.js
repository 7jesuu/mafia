import{L as Z,a as r,O as x,P as O,Q as l,R as e,_ as p,V as d,S as t,Y as ge,an as be,ao as Ge,r as R,w as Re,am as Me,al as j,T as m,t as he,$ as M,a1 as Q,aZ as De,a_ as ke,X as E,W as z,ab as Se,a$ as Ve,aX as Ae,a0 as Qe,aY as xe}from"./index-CbP_1Fhm.js";import{a as we,Q as B}from"./QTabPanels-DxpV_yec.js";import{Q as Be}from"./QBtnGroup-DMuz13dD.js";import{a as Ie,Q as X}from"./QTabs-KJTiv5Ac.js";import{Q as Y}from"./QSelect-DsZvhz22.js";import{P as a,U as ee,v as f,t as h,w as s,C as v,a7 as y,ab as qe,s as Le,ac as Je,ad as Te,ae as Ue,_ as ze}from"./_plugin-vue_export-helper-B_5_feRC.js";import{u as ae}from"./vue-i18n-zD01oK_J.js";import{u as K}from"./use-dialog-plugin-component-CBLKhCFZ.js";import{h as W,M as Oe}from"./Player.Utilities-U37_xOdV.js";import{P as He}from"./PlayerCountInput-B7tZ3mrM.js";import{_ as Ne}from"./ParticipantList.vue_vue_type_script_setup_true_lang-FU-Y7NQS.js";import{Q as $e}from"./QList-6wUb88Xh.js";import{P as k}from"./PlayerRoleIcon-BgLKzmIN.js";import"./format-BvkBI9bc.js";import"./QSlider-BgU-WLBm.js";import"./TouchPan-B-4Ch_Kj.js";const Fe=Z({__name:"HostParticipantsSummaryList",props:{participants:{type:Array,required:!0}},setup(H){const g=H,{t:C}=ae(),I=r(()=>g.participants.filter(i=>i.Role==a.Civilian).length),n=r(()=>g.participants.filter(i=>i.Role==a.Detective).length),q=r(()=>g.participants.filter(i=>i.Role==a.Doctor).length),L=r(()=>g.participants.filter(i=>i.Role==a.Mafia).length),J=r(()=>g.participants.filter(i=>i.Role==a.Murderer).length),G=r(()=>g.participants.filter(i=>i.Role==a.Psycho).length),{PlainColor:_}=ee();return(i,b)=>(x(),O($e,be(Ge(g)),{default:l(()=>[e(f,{header:""},{default:l(()=>[p(d(t(C)("Game.PlayerCount")),1)]),_:1}),e(h,null,{default:l(()=>[e(s,{side:""},{default:l(()=>[e(ge,{name:"sym_s_groups",color:t(_),size:"md"},null,8,["color"])]),_:1}),e(s,null,{default:l(()=>[e(f,null,{default:l(()=>[p(d(t(C)("Game.TotalPlayerCount")),1)]),_:1})]),_:1}),e(s,{side:""},{default:l(()=>[e(f,{caption:""},{default:l(()=>[p(d(g.participants.length),1)]),_:1})]),_:1})]),_:1}),e(f,{header:""},{default:l(()=>[p(d(t(C)("Game.PlayerRoles")),1)]),_:1}),e(h,null,{default:l(()=>[e(s,{side:""},{default:l(()=>[e(k,{role:t(a).Civilian,color:t(_),size:"md"},null,8,["role","color"])]),_:1}),e(s,null,{default:l(()=>[e(f,null,{default:l(()=>[p(d(t(C)("Game.Civilians")),1)]),_:1})]),_:1}),e(s,{side:""},{default:l(()=>[e(f,{caption:""},{default:l(()=>[p(d(I.value),1)]),_:1})]),_:1})]),_:1}),e(h,null,{default:l(()=>[e(s,{side:""},{default:l(()=>[e(k,{role:t(a).Detective,color:t(_),size:"md"},null,8,["role","color"])]),_:1}),e(s,null,{default:l(()=>[e(f,null,{default:l(()=>[p(d(t(C)("Game.Detectives")),1)]),_:1})]),_:1}),e(s,{side:""},{default:l(()=>[e(f,{caption:""},{default:l(()=>[p(d(n.value),1)]),_:1})]),_:1})]),_:1}),e(h,null,{default:l(()=>[e(s,{side:""},{default:l(()=>[e(k,{role:t(a).Doctor,color:t(_),size:"md"},null,8,["role","color"])]),_:1}),e(s,null,{default:l(()=>[e(f,null,{default:l(()=>[p(d(t(C)("Game.Doctors")),1)]),_:1})]),_:1}),e(s,{side:""},{default:l(()=>[e(f,{caption:""},{default:l(()=>[p(d(q.value),1)]),_:1})]),_:1})]),_:1}),e(h,null,{default:l(()=>[e(s,{side:""},{default:l(()=>[e(k,{role:t(a).Mafia,color:t(_),size:"md"},null,8,["role","color"])]),_:1}),e(s,null,{default:l(()=>[e(f,null,{default:l(()=>[p(d(t(C)("Game.Mafia")),1)]),_:1})]),_:1}),e(s,{side:""},{default:l(()=>[e(f,{caption:""},{default:l(()=>[p(d(L.value),1)]),_:1})]),_:1})]),_:1}),e(h,null,{default:l(()=>[e(s,{side:""},{default:l(()=>[e(k,{role:t(a).Murderer,color:t(_),size:"md"},null,8,["role","color"])]),_:1}),e(s,null,{default:l(()=>[e(f,null,{default:l(()=>[p(d(t(C)("Game.Murderers")),1)]),_:1})]),_:1}),e(s,{side:""},{default:l(()=>[e(f,{caption:""},{default:l(()=>[p(d(J.value),1)]),_:1})]),_:1})]),_:1}),e(h,null,{default:l(()=>[e(s,{side:""},{default:l(()=>[e(k,{role:t(a).Psycho,color:t(_),size:"md"},null,8,["role","color"])]),_:1}),e(s,null,{default:l(()=>[e(f,null,{default:l(()=>[p(d(t(C)("Game.Psychos")),1)]),_:1})]),_:1}),e(s,{side:""},{default:l(()=>[e(f,{caption:""},{default:l(()=>[p(d(G.value),1)]),_:1})]),_:1})]),_:1})]),_:1},16))}}),je={class:"col"},Ee={class:"text-subtitle1"},Xe={class:"col-auto"},Ye={class:"column fit no-wrap q-col-gutter-y-md"},Ke={class:"col-auto text-caption"},We={class:"column fit no-wrap q-col-gutter-y-md"},Ze={class:"col-auto text-caption"},ea={class:"col-auto"},aa={class:"col-auto"},la={class:"col-auto"},ta={key:0,class:"col-auto"},oa={class:"col-auto row items-center q-col-gutter-x-sm q-pa-sm"},na={class:"col"},ua={class:"col-auto"},ia={class:"col-auto"},sa={class:"col fit"},ra={class:"col-auto"},ca={class:"col-auto q-pa-sm"},da=Z({__name:"HostSessionCreateDialog",emits:[...K.emits],setup(H){const{dialogRef:g,onDialogOK:C,onDialogHide:I}=K(),{t:n}=ae({}),q=[{value:a.Civilian,label:n("Game.Civilian")},{value:a.Mafia,label:n("Game.Mafia")}],L=[{value:a.Doctor,label:n("Game.Doctor")},{value:a.Detective,label:n("Game.Detective")},{value:a.Murderer,label:n("Game.Murderer")},{value:a.Poisoner,label:n("Game.Poisoner")},{value:a.Psycho,label:n("Game.Psycho")},{value:a.Admirer,label:n("Game.Admirer")},{value:a.Avenger,label:n("Game.Avenger")},{value:a.Bodyguard,label:n("Game.Bodyguard")},{value:a.Journalist,label:n("Game.Journalist")},{value:a.Judge,label:n("Game.Judge")},{value:a.Luckling,label:n("Game.Luckling")}],J=[{value:a.Doctor,label:n("Game.Doctor")},{value:a.Detective,label:n("Game.Detective")},{value:a.Murderer,label:n("Game.Murderer")},{value:a.Poisoner,label:n("Game.Poisoner")},{value:a.Psycho,label:n("Game.Psycho")},{value:a.Admirer,label:n("Game.Admirer")},{value:a.Avenger,label:n("Game.Avenger")},{value:a.Bodyguard,label:n("Game.Bodyguard")},{value:a.Journalist,label:n("Game.Journalist")},{value:a.Judge,label:n("Game.Judge")},{value:a.Luckling,label:n("Game.Luckling")}],G=R(v.Game.PlayerDefaultCount),_=R(!0),i=R(W),b=R(y(v.Game.PlayerMaximumCount,o=>qe(o+1))),P=R("count"),w=R("manual"),S=R(a.Civilian),V=R([]),N=r(()=>q.concat(J.filter(o=>i.value.includes(o.value)))),D=r(()=>b.value.slice(0,Math.min(Math.max(G.value,v.Game.PlayerMinimumCount),v.Game.PlayerMaximumCount))),le=r(()=>b.value.filter(o=>o.Role==a.Civilian)),te=r(()=>b.value.filter(o=>o.Role==a.Detective)),oe=r(()=>b.value.filter(o=>o.Role==a.Doctor)),ne=r(()=>b.value.filter(o=>o.Role==a.Mafia)),ue=r(()=>b.value.filter(o=>o.Role==a.Murderer)),ie=r(()=>b.value.filter(o=>o.Role==a.Psycho)),se=r(()=>b.value.filter(o=>o.Role==a.Poisoner)),$=r(()=>P.value!="count"),re=r(()=>{if(P.value=="summary")return!1;switch(P.value){case"count":return G.value>=v.Game.PlayerMinimumCount&&G.value<=v.Game.PlayerMaximumCount;case"assignRoles":return le.value.length>=v.Game.CivilianPlayerMinimumCount&&te.value.length>=v.Game.DetectivePlayerMinimumCount&&oe.value.length>=v.Game.DoctorPlayerMinimumCount&&ne.value.length>=v.Game.MafiaPlayerMinimumCount&&ue.value.length>=v.Game.MurdererPlayerMinimumCount&&se.value.length>=v.Game.PoisonerPlayerMinimumCount&&ie.value.length>=v.Game.PsychoPlayerMinimumCount}return!0}),T=r(()=>P.value=="roles"&&_.value||P.value=="summary"),U=r(()=>w.value=="group"),ce=r(()=>_.value||D.value.filter(o=>o.Role==a.Civilian).length>=v.Game.CivilianPlayerMinimumCount&&D.value.filter(o=>o.Role==a.Mafia).length>=v.Game.MafiaPlayerMinimumCount),{ButtonStyle:de,ComponentColor:F}=ee();Re(i,o=>{o.includes(S.value)||(S.value=a.Civilian);for(const u of b.value)o.includes(u.Role)||(u.Role=a.Civilian)});function me(){switch(P.value){case"roles":P.value="count";break;case"assignRoles":P.value="roles";break;case"summary":P.value="assignRoles";break}}function ve(){switch(P.value){case"count":P.value="roles";break;case"roles":P.value="assignRoles";break;case"assignRoles":P.value="summary";break}}function pe(){i.value=W}function fe(){i.value=Oe}function Pe(){for(const o of V.value)o.Role=S.value;V.value=[]}async function _e(){const o=await Je(G.value,i.value);if(o===void 0)return;const u=Te([...y(o.MafiaPlayerCount,()=>a.Mafia),...y(o.MurdererPlayerCount,()=>a.Murderer),...y(o.PsychoPlayerCount,()=>a.Psycho),...y(o.AdmirerPlayerCount,()=>a.Admirer),...y(o.AvengerPlayerCount,()=>a.Avenger),...y(o.BodyguardPlayerCount,()=>a.Bodyguard),...y(o.DetectivePlayerCount,()=>a.Detective),...y(o.DoctorPlayerCount,()=>a.Doctor),...y(o.JournalistPlayerCount,()=>a.Journalist),...y(o.JudgePlayerCount,()=>a.Judge),...y(o.LucklingPlayerCount,()=>a.Luckling)],a.Civilian,G.value),c=Ue(u);let A=0;for(const Ce of D.value)c[A]!==void 0&&(Ce.Role=c[A]),A++}function ye(){C({Participants:D.value,HasInitialRolesSet:!_.value,AdditionalRoles:i.value})}return(o,u)=>(x(),O(xe,{ref_key:"dialogRef",ref:g,onHide:u[13]||(u[13]=()=>t(I)()),persistent:""},{default:l(()=>[e(Me,{class:"q-dialog-plugin dialog-card column no-wrap","non-square":""},{default:l(()=>[e(j,{class:"col-auto row items-center justify-between"},{default:l(()=>[m("div",je,[m("div",Ee,d(t(n)("Game.GameSetup")),1)]),m("div",Xe,[he(e(M,{icon:"s_close",round:"",flat:""},null,512),[[Le]])])]),_:1}),e(Q),e(j,{class:"col grid scroll fit q-pa-none"},{default:l(()=>[e(we,{modelValue:P.value,"onUpdate:modelValue":u[10]||(u[10]=c=>P.value=c),class:"fit","keep-alive":"",animated:""},{default:l(()=>[e(B,{class:"fit q-pa-md",name:"count"},{default:l(()=>[m("div",Ye,[m("div",Ke,d(t(n)("Game.NumberOfPlayers")),1),e(He,{class:"col-auto",modelValue:G.value,"onUpdate:modelValue":u[0]||(u[0]=c=>G.value=c),minimum:t(v).Game.PlayerMinimumCount,maximum:t(v).Game.PlayerMaximumCount},null,8,["modelValue","minimum","maximum"])])]),_:1}),e(B,{class:"fit q-pa-md",name:"roles"},{default:l(()=>[m("div",We,[m("div",Ze,d(t(n)("Game.AdditionalRoles")),1),m("div",ea,[e(Be,{spread:"",outline:""},{default:l(()=>[e(M,{onClick:u[1]||(u[1]=()=>pe()),label:t(n)("Game.Classic"),outline:"","no-caps":""},null,8,["label"]),e(M,{onClick:u[2]||(u[2]=()=>fe()),label:t(n)("Game.Mafia20"),outline:"","no-caps":""},null,8,["label"])]),_:1})]),m("div",aa,[e(De,{modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=c=>i.value=c),options:L,type:"checkbox",color:t(F)},null,8,["modelValue","color"])]),m("div",la,[e(ke,{modelValue:_.value,"onUpdate:modelValue":u[4]||(u[4]=c=>_.value=c),label:t(n)("Game.SetRolesLater"),color:t(F)},null,8,["modelValue","label","color"])])])]),_:1}),e(B,{class:"column fit no-wrap q-pa-none",name:"assignRoles"},{default:l(()=>[e(Ie,{class:"col-auto text-primary q-pa-sm",modelValue:w.value,"onUpdate:modelValue":u[5]||(u[5]=c=>w.value=c),align:"justify","no-caps":""},{default:l(()=>[e(X,{name:"manual",label:t(n)("Game.RoleManual")},null,8,["label"]),e(X,{name:"group",label:t(n)("Game.RoleGroup")},null,8,["label"])]),_:1},8,["modelValue"]),U.value?z("",!0):(x(),E("div",ta,[e(Q)])),U.value?(x(),E(Se,{key:1},[m("div",oa,[m("div",na,[e(Y,{modelValue:S.value,"onUpdate:modelValue":u[6]||(u[6]=c=>S.value=c),options:N.value,behavior:"menu","map-options":"","emit-value":"","hide-bottom-space":"",outlined:"",dense:""},null,8,["modelValue","options"])]),m("div",ua,[e(M,{label:t(n)("Game.Assign"),disable:V.value.length<1,onClick:u[7]||(u[7]=()=>Pe()),color:"primary",outline:"","no-caps":""},null,8,["label","disable"])])]),m("div",ia,[e(Q)])],64)):z("",!0),m("div",sa,[e(Ne,{class:"fit scroll",modelValue:V.value,"onUpdate:modelValue":u[8]||(u[8]=c=>V.value=c),items:D.value,selection:w.value=="group"},Ve({_:2},[U.value?void 0:{name:"actions",fn:l(({participant:c})=>[e(Y,{modelValue:c.Role,"onUpdate:modelValue":A=>c.Role=A,options:N.value,behavior:"menu","map-options":"","emit-value":"","hide-bottom-space":"",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","options"])]),key:"0"}]),1032,["modelValue","items","selection"])]),m("div",ra,[e(Q)]),m("div",ca,[e(M,{class:"full-width",label:t(n)("Game.AssignRandomly"),onClick:u[9]||(u[9]=()=>_e()),color:"primary",outline:"","no-caps":""},null,8,["label"])])]),_:1}),e(B,{class:"fit q-pa-none",name:"summary"},{default:l(()=>[e(Fe,{participants:D.value},null,8,["participants"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(Q),e(Ae,{class:"col-auto",align:"right"},{default:l(()=>[$.value?(x(),O(M,{key:0,onClick:u[11]||(u[11]=()=>me()),label:t(n)("General.Back"),disable:!$.value,color:"primary",flat:"","no-caps":""},null,8,["label","disable"])):z("",!0),e(M,Qe({onClick:u[12]||(u[12]=()=>T.value?ye():ve()),label:T.value?t(n)("General.Create"):t(n)("General.Next"),disable:T.value?!ce.value:!re.value,color:"primary"},t(de),{"no-caps":""}),null,16,["label","disable"])]),_:1})]),_:1})]),_:1},512))}}),Sa=ze(da,[["__scopeId","data-v-55079c05"]]);export{Sa as default};
